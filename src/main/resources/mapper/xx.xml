<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fengzijk.springdemo.mapper.IpWhiteListMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap"
               type="com.fengzijk.springdemo.entity.IpWhiteListEntity">
        <id column="id" property="id"/>
        <result column="start_ip" property="startIp"/>
        <result column="end_ip" property="endIp"/>
        <result column="state" property="state"/>
        <result column="type" property="type"/>
        <result column="create_id" property="createId"/>
        <result column="update_id" property="updateId"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>

    <sql id="Base_Column_List">
        id, type ,start_ip as startIp ,end_ip as endIp , state, type ,create_id as createId ,update_id  as updateId
    </sql>



    <!-- 新增或更新 -->
    <insert id="saveOrUpdate">
        INSERT INTO ip_white_list
            (type, start_ip, end_ip, state, create_id, update_id)
        VALUES (#{type}, #{startIp}, #{endIp}, #{state}, #{createId}, #{updateId}) ON DUPLICATE KEY
        UPDATE
            type=#{type},
            update_time=now()
    </insert>

    <!-- 根据ID 查询 -->
    <select id="selectByxxId" resultType="com.fengzijk.springdemo.entity.IpWhiteListEntity" flushCache="true">
        select
        <include refid="Base_Column_List"/>
        from ip_white_list
        where id = #{id}
    </select>
</mapper>
